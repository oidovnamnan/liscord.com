# üîî LISCORD ‚Äî –ú–≠–î–≠–ì–î–õ–ò–ô–ù –ë“Æ–†–≠–ù –ú–û–î–£–õ–¨

> **–ó–∞—Ä—á–∏–º:** –ó”©–≤ —Ö“Ø–Ω–¥, –∑”©–≤ —Ü–∞–≥—Ç, –∑”©–≤ —Å—É–≤–≥–∞–∞—Ä –º—ç–¥—ç–≥–¥—ç–ª —Ö“Ø—Ä–≥—ç—Ö.
> –•—ç—Ç –æ–ª–æ–Ω –º—ç–¥—ç–≥–¥—ç–ª = spam. –•—ç—Ç —Ü”©”©–Ω = –º—ç–¥—ç—ç–ª—ç–ª –∞–ª–¥–∞–≥–¥–∞–Ω–∞.

---

## 1. –ú–≠–î–≠–ì–î–õ–ò–ô–ù –°–£–í–ì–£–£–î

| # | –°—É–≤–∞–≥ | –¢–∞–π–ª–±–∞—Ä | –•—ç–∑—ç—ç |
|---|-------|---------|-------|
| 1 | **In-app** | –ê–ø–ø –¥–æ—Ç–æ—Ä –∂–∞–≥—Å–∞–∞–ª—Ç–∞–∞—Ä | –ë“Ø—Ö –º—ç–¥—ç–≥–¥—ç–ª |
| 2 | **Push** | FCM ‚Äî —Ç”©—Ö”©”©—Ä”©–º–∂ –¥—ç—ç—Ä | –ß—É—Ö–∞–ª –º—ç–¥—ç–≥–¥–ª“Ø“Ø–¥ |
| 3 | **Email** | Transactional email | –ù—ç—Ö—ç–º–∂–ª—ç–ª, —Ç–∞–π–ª–∞–Ω |
| 4 | **SMS** | OTP, —è–∞—Ä–∞–ª—Ç–∞–π –º—ç–¥—ç–≥–¥—ç–ª | –ë“Ø—Ä—Ç–≥—ç–ª, –Ω—É—É—Ü “Ø–≥ |

---

## 2. –ú–≠–î–≠–ì–î–õ–ò–ô–ù –ë“Æ–• TEMPLATE-–ò–ô–ù –ñ–ê–ì–°–ê–ê–õ–¢

### 2.1 –ó–∞—Ö–∏–∞–ª–≥—ã–Ω –º—ç–¥—ç–≥–¥–ª“Ø“Ø–¥
| # | Template ID | –ì–∞—Ä—á–∏–≥ (MN) | –°—É–≤–∞–≥ | –•—ç–Ω–¥ |
|---|-------------|-------------|-------|------|
| 1 | `order.new` | –®–∏–Ω—ç –∑–∞—Ö–∏–∞–ª–≥–∞ –∏—Ä–ª—ç—ç | In-app + Push | `notifications.receive_new_order` —ç—Ä—Ö—Ç—ç–π |
| 2 | `order.status_changed` | –ó–∞—Ö–∏–∞–ª–≥—ã–Ω —Å—Ç–∞—Ç—É—Å ”©”©—Ä—á–ª”©–≥–¥–ª”©”© | In-app + Push | –•–æ–ª–±–æ–≥–¥–æ—Ö –∞–∂–∏–ª—Ç–∞–Ω |
| 3 | `order.assigned` | –¢–∞–Ω–¥ –∑–∞—Ö–∏–∞–ª–≥–∞ —Ö—É–≤–∞–∞—Ä–∏–ª–∞–≥–¥–ª–∞–∞ | In-app + Push | –•—É–≤–∞–∞—Ä–∏–ª–∞–≥–¥—Å–∞–Ω –∞–∂–∏–ª—Ç–∞–Ω |
| 4 | `order.deleted` | –ó–∞—Ö–∏–∞–ª–≥–∞ —É—Å—Ç–≥–∞–≥–¥–ª–∞–∞ | In-app | Admin/Manager |
| 5 | `order.edited` | –ó–∞—Ö–∏–∞–ª–≥–∞ –∑–∞—Å–∞–≥–¥–ª–∞–∞ | In-app | “Æ“Ø—Å–≥—ç—Å—ç–Ω –∞–∂–∏–ª—Ç–∞–Ω |
| 6 | `order.comment` | –ó–∞—Ö–∏–∞–ª–≥–∞–Ω–¥ —Ç—ç–º–¥—ç–≥–ª—ç–ª –Ω—ç–º—ç–≥–¥–ª—ç—ç | In-app | –•–æ–ª–±–æ–≥–¥–æ—Ö |
| 7 | `order.overdue` | –ó–∞—Ö–∏–∞–ª–≥–∞ —Ö—É–≥–∞—Ü–∞–∞ —Ö—ç—Ç—ç—Ä–ª—ç—ç | In-app + Push | Manager+ |

### 2.2 –¢”©–ª–±”©—Ä–∏–π–Ω –º—ç–¥—ç–≥–¥–ª“Ø“Ø–¥
| # | Template ID | –ì–∞—Ä—á–∏–≥ | –°—É–≤–∞–≥ | –•—ç–Ω–¥ |
|---|-------------|--------|-------|------|
| 8 | `payment.received` | –¢”©–ª–±”©—Ä –±“Ø—Ä—Ç–≥—ç–≥–¥–ª—ç—ç | In-app + Push | `notifications.receive_payment` |
| 9 | `payment.full` | –ó–∞—Ö–∏–∞–ª–≥–∞ –±“Ø—Ä—ç–Ω —Ç”©–ª”©–≥–¥–ª”©”© | In-app + Push | –•–æ–ª–±–æ–≥–¥–æ—Ö |
| 10 | `payment.refund` | –ë—É—Ü–∞–∞–ª—Ç —Ö–∏–π–≥–¥–ª—ç—ç | In-app + Push | Manager+ |
| 11 | `payment.overdue_warning` | –ê–≤–ª–∞–≥–∞ —Ö—É–≥–∞—Ü–∞–∞ —Ö—ç—Ç—Ä—ç—Ö –≥—ç–∂ –±–∞–π–Ω–∞ | In-app + Push | Manager+ |
| 12 | `payment.overdue` | –ê–≤–ª–∞–≥–∞ —Ö—É–≥–∞—Ü–∞–∞ —Ö—ç—Ç—ç—Ä–ª—ç—ç | In-app + Push | Manager+ |
| 13 | `payment.credit_limit` | –ó—ç—ç–ª–∏–π–Ω —Ö—è–∑–≥–∞–∞—Ä 80%+ –∞—à–∏–≥–ª–∞–≥–¥–ª–∞–∞ | In-app | Manager+ |

### 2.3 –ù”©”©—Ü–∏–π–Ω –º—ç–¥—ç–≥–¥–ª“Ø“Ø–¥
| # | Template ID | –ì–∞—Ä—á–∏–≥ | –°—É–≤–∞–≥ | –•—ç–Ω–¥ |
|---|-------------|--------|-------|------|
| 14 | `stock.low` | –ë–∞—Ä–∞–∞–Ω—ã –Ω”©”©—Ü –±–∞–≥–∞ –±–æ–ª–ª–æ–æ | In-app + Push | `notifications.receive_low_stock` |
| 15 | `stock.out` | –ë–∞—Ä–∞–∞ –¥—É—É—Å–ª–∞–∞ (0 “Ø–ª–¥–ª—ç—ç) | In-app + Push | Manager+ |
| 16 | `stock.received` | –ù”©”©—Ü –Ω—ç–º—ç–≥–¥–ª—ç—ç (PO —Ö“Ø–ª—ç—ç–Ω –∞–≤–ª–∞–∞) | In-app | –ù—è—Ä–∞–≤ |
| 17 | `stock.expiry_warning` | –ë–∞—Ä–∞–∞–Ω—ã —Ö—É–≥–∞—Ü–∞–∞ –¥—É—É—Å–∞—Ö –≥—ç–∂ –±–∞–π–Ω–∞ | In-app + Push | Manager+ |

### 2.4 –ë–∞–≥–∏–π–Ω –º—ç–¥—ç–≥–¥–ª“Ø“Ø–¥
| # | Template ID | –ì–∞—Ä—á–∏–≥ | –°—É–≤–∞–≥ | –•—ç–Ω–¥ |
|---|-------------|--------|-------|------|
| 18 | `team.invite_received` | –¢–∞–Ω–¥ –±–∏–∑–Ω–µ—Å—Ç –Ω—ç–≥–¥—ç—Ö —É—Ä–∏–ª–≥–∞ –∏—Ä–ª—ç—ç | In-app + Push | –£—Ä–∏–ª–≥–∞ –∞–≤–∞–≥—á |
| 19 | `team.invite_accepted` | –ê–∂–∏–ª—Ç–∞–Ω —É—Ä–∏–ª–≥–∞ –∑”©–≤—à”©”©—Ä–ª”©”© | In-app | –£—Ä–∏—Ö —ç—Ä—Ö—Ç—ç–π |
| 20 | `team.member_joined` | –®–∏–Ω—ç –∞–∂–∏–ª—Ç–∞–Ω –Ω—ç–º—ç–≥–¥–ª—ç—ç | In-app | –ë“Ø—Ö –∞–∂–∏–ª—Ç–∞–Ω |
| 21 | `team.member_removed` | –ê–∂–∏–ª—Ç–∞–Ω —Ö–∞—Å–∞–≥–¥–ª–∞–∞ | In-app | Manager+ |
| 22 | `team.role_changed` | –¢–∞–Ω—ã –∞–ª–±–∞–Ω —Ç—É—à–∞–∞–ª ”©”©—Ä—á–ª”©–≥–¥–ª”©”© | In-app + Push | –¢—É—Ö–∞–π–Ω –∞–∂–∏–ª—Ç–∞–Ω |

### 2.5 –ß–∞—Ç—ã–Ω –º—ç–¥—ç–≥–¥–ª“Ø“Ø–¥
| # | Template ID | –ì–∞—Ä—á–∏–≥ | –°—É–≤–∞–≥ | –•—ç–Ω–¥ |
|---|-------------|--------|-------|------|
| 23 | `chat.new_message` | –®–∏–Ω—ç –º–µ—Å—Å–µ–∂ –∏—Ä–ª—ç—ç | In-app + Push | –°—É–≤–≥–∏–π–Ω –≥–∏—à“Ø“Ø–¥ / DM —Ö“Ø–ª—ç—ç–Ω –∞–≤–∞–≥—á |
| 24 | `chat.mention` | –¢–∞–Ω—ã–≥ –¥—É—Ä–¥–ª–∞–∞ (@mention) | In-app + Push | –î—É—Ä–¥–∞–≥–¥—Å–∞–Ω —Ö“Ø–Ω |
| 25 | `chat.task_assigned` | –¢–∞–Ω–¥ –¥–∞–∞–ª–≥–∞–≤–∞—Ä ”©–≥”©–≥–¥–ª”©”© | In-app + Push | –î–∞–∞–ª–≥–∞–≤–∞—Ä –∞–≤–∞–≥—á |
| 26 | `chat.task_completed` | –î–∞–∞–ª–≥–∞–≤–∞—Ä –≥“Ø–π—Ü—ç—Ç–≥—ç–≥–¥–ª—ç—ç | In-app | –î–∞–∞–ª–≥–∞–≤–∞—Ä ”©–≥”©–≥—á |

### 2.6 HR / –¶–∞–ª–∏–Ω–≥–∏–π–Ω –º—ç–¥—ç–≥–¥–ª“Ø“Ø–¥
| # | Template ID | –ì–∞—Ä—á–∏–≥ | –°—É–≤–∞–≥ | –•—ç–Ω–¥ |
|---|-------------|--------|-------|------|
| 27 | `hr.clock_reminder` | –¶–∞–≥ –±“Ø—Ä—Ç–≥—ç—Ö —Å–∞–Ω—É—É–ª–≥–∞ | Push | –ê–∂–∏–ª—Ç–∞–Ω |
| 28 | `hr.late_arrival` | –•–æ—Ü—Ä–æ–ª—Ç –±“Ø—Ä—Ç–≥—ç–≥–¥–ª—ç—ç | In-app | –ê–∂–∏–ª—Ç–∞–Ω + Manager |
| 29 | `hr.leave_request` | –ß”©–ª”©”©–Ω–∏–π —Ö“Ø—Å—ç–ª—Ç –∏—Ä–ª—ç—ç | In-app + Push | Manager+ |
| 30 | `hr.leave_approved` | –ß”©–ª”©”© –∑”©–≤—à”©”©—Ä”©–≥–¥–ª”©”© | In-app + Push | –ê–∂–∏–ª—Ç–∞–Ω |
| 31 | `hr.leave_rejected` | –ß”©–ª”©”© —Ç–∞—Ç–≥–∞–ª–∑–∞–≥–¥–ª–∞–∞ | In-app + Push | –ê–∂–∏–ª—Ç–∞–Ω |
| 32 | `hr.payslip_ready` | –¶–∞–ª–∏–Ω–≥–∏–π–Ω —Ö—É—É–¥–∞—Å –±—ç–ª—ç–Ω –±–æ–ª–ª–æ–æ | In-app + Push | –ê–∂–∏–ª—Ç–∞–Ω |
| 33 | `hr.overtime_alert` | –ò–ª“Ø“Ø —Ü–∞–≥–∏–π–Ω –∞–Ω—Ö–∞–∞—Ä—É—É–ª–≥–∞ | In-app | Manager |

### 2.7 –ë—É—Ü–∞–∞–ª—Ç / –ì–æ–º–¥–ª—ã–Ω –º—ç–¥—ç–≥–¥–ª“Ø“Ø–¥
| # | Template ID | –ì–∞—Ä—á–∏–≥ | –°—É–≤–∞–≥ | –•—ç–Ω–¥ |
|---|-------------|--------|-------|------|
| 34 | `ticket.new` | –®–∏–Ω—ç –≥–æ–º–¥–æ–ª/–±—É—Ü–∞–∞–ª—Ç –±“Ø—Ä—Ç–≥—ç–≥–¥–ª—ç—ç | In-app + Push | Ticket —ç—Ä—Ö—Ç—ç–π |
| 35 | `ticket.status_changed` | –ì–æ–º–¥–ª—ã–Ω —Å—Ç–∞—Ç—É—Å —à–∏–Ω—ç—á–ª—ç–≥–¥–ª—ç—ç | In-app | –•–æ–ª–±–æ–≥–¥–æ—Ö |
| 36 | `ticket.assigned` | –¢–∞–Ω–¥ —Ç–∏–∫–µ—Ç —Ö—É–≤–∞–∞—Ä–∏–ª–∞–≥–¥–ª–∞–∞ | In-app + Push | –•—É–≤–∞–∞—Ä–∏–ª–∞–≥–¥—Å–∞–Ω |
| 37 | `ticket.resolved` | –ì–æ–º–¥–æ–ª —à–∏–π–¥–≤—ç—Ä–ª—ç–≥–¥–ª—ç—ç | In-app | Manager |

### 2.8 –•“Ø—Ä–≥—ç–ª—Ç–∏–π–Ω –º—ç–¥—ç–≥–¥–ª“Ø“Ø–¥
| # | Template ID | –ì–∞—Ä—á–∏–≥ | –°—É–≤–∞–≥ | –•—ç–Ω–¥ |
|---|-------------|--------|-------|------|
| 38 | `delivery.assigned` | –•“Ø—Ä–≥—ç–ª—Ç —Ö—É–≤–∞–∞—Ä–∏–ª–∞–≥–¥–ª–∞–∞ | In-app + Push | –•“Ø—Ä–≥—ç–≥—á |
| 39 | `delivery.picked_up` | –•“Ø—Ä–≥—ç–≥—á –∞—á–∞–∞–≥ –∞–≤–ª–∞–∞ | In-app | –ó–∞—Ö–∏–∞–ª–≥–∞ “Ø“Ø—Å–≥—ç—Å—ç–Ω |
| 40 | `delivery.completed` | –•“Ø—Ä–≥—ç–ª—Ç –∞–º–∂–∏–ª—Ç—Ç–∞–π | In-app | –ó–∞—Ö–∏–∞–ª–≥–∞ “Ø“Ø—Å–≥—ç—Å—ç–Ω |
| 41 | `delivery.failed` | –•“Ø—Ä–≥—ç–ª—Ç –∞–º–∂–∏–ª—Ç–≥“Ø–π | In-app + Push | Manager |

### 2.9 –°–∏—Å—Ç–µ–º–∏–π–Ω –º—ç–¥—ç–≥–¥–ª“Ø“Ø–¥
| # | Template ID | –ì–∞—Ä—á–∏–≥ | –°—É–≤–∞–≥ | –•—ç–Ω–¥ |
|---|-------------|--------|-------|------|
| 42 | `system.plan_expiring` | –ë–∞–≥—Ü—ã–Ω —Ö—É–≥–∞—Ü–∞–∞ –¥—É—É—Å–∞—Ö –≥—ç–∂ –±–∞–π–Ω–∞ | In-app + Push + Email | –≠–∑—ç–Ω |
| 43 | `system.plan_expired` | –ë–∞–≥—Ü—ã–Ω —Ö—É–≥–∞—Ü–∞–∞ –¥—É—É—Å–ª–∞–∞ | In-app + Push + Email | –≠–∑—ç–Ω |
| 44 | `system.usage_limit` | –•—è–∑–≥–∞–∞—Ä–ª–∞–ª—Ç–∞–Ω–¥ –æ–π—Ä—Ç–æ–∂ –±–∞–π–Ω–∞ | In-app | –≠–∑—ç–Ω |
| 45 | `system.maintenance` | –°–∏—Å—Ç–µ–º–∏–π–Ω –∑–∞—Å–≤–∞—Ä “Ø–π–ª—á–∏–ª–≥—ç—ç | In-app + Push | –ë“Ø–≥–¥ |
| 46 | `system.new_feature` | –®–∏–Ω—ç —Ñ—É–Ω–∫—Ü –Ω—ç–º—ç–≥–¥–ª—ç—ç | In-app | –ë“Ø–≥–¥ |
| 47 | `system.terms_updated` | “Æ–π–ª—á–∏–ª–≥—ç—ç–Ω–∏–π –Ω”©—Ö—Ü”©–ª —à–∏–Ω—ç—á–ª—ç–≥–¥–ª—ç—ç | In-app + Email | –≠–∑—ç–Ω |
| 48 | `system.security_alert` | –ê—é—É–ª–≥“Ø–π –±–∞–π–¥–ª—ã–Ω –∞–Ω—Ö–∞–∞—Ä—É—É–ª–≥–∞ | In-app + Push + Email | –≠–∑—ç–Ω |

### 2.10 –≠—Ü—Å–∏–π–Ω —Ö—ç—Ä—ç–≥–ª—ç–≥—á–∏–¥ (–±–∏–∑–Ω–µ—Å—ç—ç—Å)
| # | Template ID | –ì–∞—Ä—á–∏–≥ | –°—É–≤–∞–≥ | –•—ç–Ω–¥ |
|---|-------------|--------|-------|------|
| 49 | `customer.order_confirmed` | –¢–∞–Ω—ã –∑–∞—Ö–∏–∞–ª–≥–∞ –±“Ø—Ä—Ç–≥—ç–≥–¥–ª—ç—ç | Email | –≠—Ü—Å–∏–π–Ω —Ö—ç—Ä—ç–≥–ª—ç–≥—á |
| 50 | `customer.status_update` | –ó–∞—Ö–∏–∞–ª–≥—ã–Ω —Å—Ç–∞—Ç—É—Å —à–∏–Ω—ç—á–ª—ç–ª—Ç | Email | –≠—Ü—Å–∏–π–Ω —Ö—ç—Ä—ç–≥–ª—ç–≥—á |
| 51 | `customer.payment_receipt` | –¢”©–ª–±”©—Ä–∏–π–Ω –±–∞—Ä–∏–º—Ç | Email | –≠—Ü—Å–∏–π–Ω —Ö—ç—Ä—ç–≥–ª—ç–≥—á |
| 52 | `customer.delivery_update` | –•“Ø—Ä–≥—ç–ª—Ç–∏–π–Ω –º—ç–¥—ç–≥–¥—ç–ª | Email / SMS | –≠—Ü—Å–∏–π–Ω —Ö—ç—Ä—ç–≥–ª—ç–≥—á |
| 53 | `customer.tracking_link` | Tracking –ª–∏–Ω–∫ | Email / SMS | –≠—Ü—Å–∏–π–Ω —Ö—ç—Ä—ç–≥–ª—ç–≥—á |

**–ù–∏–π—Ç: 53 template**

---

## 3. –ú–≠–î–≠–ì–î–õ–ò–ô–ù –ú–≠–î–≠–≠–õ–õ–ò–ô–ù –ë“Æ–¢–≠–¶

```javascript
// Firestore: businesses/{bizId}/notifications/{notifId}
{
  id: "notif_abc123",
  
  // Template
  templateId: "order.new",
  
  // –ê–≥—É—É–ª–≥–∞
  title: "–®–∏–Ω—ç –∑–∞—Ö–∏–∞–ª–≥–∞ #ORD-0042",
  body: "–ë–æ–ª–¥ ‚Äî ‚ÇÆ8,555,000 ‚Äî iPhone 15 Pro x2",
  icon: "üì•",
  
  // –•–æ–ª–±–æ–æ—Å
  link: "/app/orders/ord_xyz",          // –ê–ø–ø –¥–æ—Ç–æ—Ä —Ö–∞–∞—à–∞–∞ –æ—á–∏—Ö
  linkType: "order",                     // "order" | "customer" | "product" | "chat" | "ticket" | "hr" | "settings"
  referenceId: "ord_xyz",               // –•–æ–ª–±–æ–≥–¥–æ—Ö object ID
  
  // –•—ç–Ω–¥
  recipientIds: ["user_1", "user_2"],    // –¢–æ–¥–æ—Ä—Ö–æ–π —Ö—ç—Ä—ç–≥–ª—ç–≥—á–∏–¥
  recipientRole: null,                   // –≠—Å–≤—ç–ª "admin" | "manager" | "all"
  
  // –°—É–≤–∞–≥
  channels: {
    inApp: true,
    push: true,
    email: false,
    sms: false
  },
  
  // –ë“Ø–ª—ç–≥–ª—ç–ª
  groupKey: "order.new_2026-02-22",      // –ò–∂–∏–ª —Ç”©—Ä–ª–∏–π–Ω –º—ç–¥—ç–≥–¥–ª–∏–π–≥ –±“Ø–ª—ç–≥–ª—ç—Ö
  
  // –£–Ω—à—Å–∞–Ω/–£–Ω—à–∞–∞–≥“Ø–π (—Ö—ç—Ä—ç–≥–ª—ç–≥—á –±“Ø—Ä—Ç)
  readBy: {
    "user_1": Timestamp,                 // user_1 —É–Ω—à—Å–∞–Ω —Ü–∞–≥
    // "user_2": null ‚Üí —É–Ω—à–∞–∞–≥“Ø–π
  },
  
  // –ú–µ—Ç–∞
  priority: "normal",                    // "low" | "normal" | "high" | "urgent"
  expiresAt: null,                       // –•—É–≥–∞—Ü–∞–∞ –¥—É—É—Å–∞—Ö (null = —Ö—ç–∑—ç—ç —á)
  createdAt: Timestamp,
  createdBy: "system",                   // "system" | userId
}

// Firestore: users/{userId}/notificationPreferences
{
  // –°—É–≤–∞–≥ –±“Ø—Ä—ç—ç—Ä ON/OFF
  channels: {
    push: true,
    email: true,
    sms: false,
    inApp: true                          // In-app = –∑–∞–∞–≤–∞–ª ON (off –±–æ–ª–≥–æ–∂ –±–æ–ª–æ—Ö–≥“Ø–π)
  },
  
  // Template –±“Ø—Ä—ç—ç—Ä ON/OFF
  templates: {
    "order.new":            { push: true,  email: false, sms: false },
    "order.status_changed": { push: true,  email: false, sms: false },
    "payment.received":     { push: true,  email: false, sms: false },
    "stock.low":            { push: true,  email: false, sms: false },
    "chat.new_message":     { push: true,  email: false, sms: false },
    "chat.mention":         { push: true,  email: false, sms: false },
    "hr.clock_reminder":    { push: true,  email: false, sms: false },
    "hr.payslip_ready":     { push: true,  email: true,  sms: false },
    "system.plan_expiring": { push: true,  email: true,  sms: false },
    // ... –±—É—Å–∞–¥ template-–∏–π–Ω default
  },
  
  // –ß–∏–º—ç—ç–≥“Ø–π —Ü–∞–≥ (Do Not Disturb)
  quietHours: {
    enabled: false,
    start: "22:00",                      // Push –∏–ª–≥—ç—ç—Ö–≥“Ø–π —Ü–∞–≥ —ç—Ö–ª—ç—Ö
    end: "08:00",                        // Push –∏–ª–≥—ç—ç—Ö–≥“Ø–π —Ü–∞–≥ –¥—É—É—Å–∞—Ö
  },
  
  // FCM token-—É—É–¥ (–æ–ª–æ–Ω —Ç”©—Ö”©”©—Ä”©–º–∂)
  fcmTokens: [
    { token: "fcm_token_1", device: "iPhone 15", lastUsed: Timestamp },
    { token: "fcm_token_2", device: "MacBook", lastUsed: Timestamp }
  ]
}
```

---

## 4. –ú–≠–î–≠–ì–î–õ–ò–ô–ù UI

### 4.1 –ú—ç–¥—ç–≥–¥–ª–∏–π–Ω —Ç–æ–≤—á–ª—É—É—Ä (Header)
```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  LISCORD    üîî(3)    üë§ –ë–∞—Ç     ‚îÇ  ‚Üê 3 = —É–Ω—à–∞–∞–≥“Ø–π –º—ç–¥—ç–≥–¥–ª–∏–π–Ω —Ç–æ–æ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### 4.2 –ú—ç–¥—ç–≥–¥–ª–∏–π–Ω dropdown / —Ö—É—É–¥–∞—Å
```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  üîî –ú—ç–¥—ç–≥–¥—ç–ª            [–ë“Ø–≥–¥ —É–Ω—à—Å–∞–Ω]  ‚îÇ
‚îÇ  [–ë“Ø–≥–¥] [–£–Ω—à–∞–∞–≥“Ø–π (3)] [–ó–∞—Ö–∏–∞–ª–≥–∞] [–ß–∞—Ç]‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                          ‚îÇ
‚îÇ  ‚óè üì• –®–∏–Ω—ç –∑–∞—Ö–∏–∞–ª–≥–∞ #ORD-0055    2 –º–∏–Ω  ‚îÇ
‚îÇ    –ë–æ–ª–¥ ‚Äî ‚ÇÆ2,500,000                    ‚îÇ
‚îÇ                                          ‚îÇ
‚îÇ  ‚óè üí∞ –¢”©–ª–±”©—Ä –±“Ø—Ä—Ç–≥—ç–≥–¥–ª—ç—ç #ORD-0042 5–º–∏–Ω‚îÇ
‚îÇ    ‚ÇÆ5,000,000 ‚Äî –•–∞–∞–Ω –±–∞–Ω–∫             ‚îÇ
‚îÇ                                          ‚îÇ
‚îÇ  ‚óè ‚ö†Ô∏è iPhone 15 Pro –Ω”©”©—Ü –±–∞–≥–∞    15 –º–∏–Ω‚îÇ
‚îÇ    “Æ–ª–¥—Å—ç–Ω: 2 —à–∏—Ä—Ö—ç–≥ (—Ö—è–∑–≥–∞–∞—Ä: 3)      ‚îÇ
‚îÇ                                          ‚îÇ
‚îÇ  ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ ”®—á–∏–≥–¥”©—Ä ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ          ‚îÇ
‚îÇ                                          ‚îÇ
‚îÇ  ‚óã üìã –ó–∞—Ö–∏–∞–ª–≥–∞ #ORD-0053 —Ö“Ø—Ä–≥—ç–≥–¥–ª—ç—ç    ‚îÇ
‚îÇ    –î–æ—Ä–∂ —Ö“Ø—Ä–≥—ç–ª—Ç –≥“Ø–π—Ü—ç—Ç–≥—ç—Å—ç–Ω            ‚îÇ
‚îÇ                                          ‚îÇ
‚îÇ  ‚óã üë§ –®–∏–Ω—ç –∞–∂–∏–ª—Ç–∞–Ω –Ω—ç–º—ç–≥–¥–ª—ç—ç           ‚îÇ
‚îÇ    –°–∞—Ä–∞–∞ ‚Äî –ë“Ø—Ä—Ç–≥—ç–≥—á                     ‚îÇ
‚îÇ                                          ‚îÇ
‚îÇ  [–ë“Ø—Ö –º—ç–¥—ç–≥–¥—ç–ª —Ö–∞—Ä–∞—Ö ‚Üí]                ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

‚óè = –£–Ω—à–∞–∞–≥“Ø–π (bold, colored dot)
‚óã = –£–Ω—à—Å–∞–Ω (dimmed)
```

### 4.3 –ú—ç–¥—ç–≥–¥–ª–∏–π–Ω —Ç–æ—Ö–∏—Ä–≥–æ–æ –¥—ç–ª–≥—ç—Ü
```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  ‚öôÔ∏è –¢–æ—Ö–∏—Ä–≥–æ–æ > –ú—ç–¥—ç–≥–¥—ç–ª                ‚îÇ
‚îÇ                                          ‚îÇ
‚îÇ  ‚îÄ‚îÄ –°—É–≤–∞–≥ ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ ‚îÇ
‚îÇ  üì± Push Notification  [‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñë‚ñë] ON   ‚îÇ
‚îÇ  üìß Email              [‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñë‚ñë] ON   ‚îÇ
‚îÇ  üì≤ SMS                [‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë] OFF  ‚îÇ
‚îÇ                                          ‚îÇ
‚îÇ  ‚îÄ‚îÄ –ß–∏–º—ç—ç–≥“Ø–π —Ü–∞–≥ ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ ‚îÇ
‚îÇ  üåô –ß–∏–º—ç—ç–≥“Ø–π –≥–æ—Ä–∏–º    [‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë] OFF  ‚îÇ
‚îÇ     22:00 ‚Äî 08:00 (Push –∏—Ä—ç—Ö–≥“Ø–π)       ‚îÇ
‚îÇ                                          ‚îÇ
‚îÇ  ‚îÄ‚îÄ –ó–∞—Ö–∏–∞–ª–≥–∞ ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ ‚îÇ
‚îÇ  üì• –®–∏–Ω—ç –∑–∞—Ö–∏–∞–ª–≥–∞      Push ‚òë  Email ‚òê  ‚îÇ
‚îÇ  üìã –°—Ç–∞—Ç—É—Å ”©”©—Ä—á–ª”©–ª—Ç    Push ‚òë  Email ‚òê  ‚îÇ
‚îÇ  üóëÔ∏è –ó–∞—Ö–∏–∞–ª–≥–∞ —É—Å—Ç–≥–∞—Å–∞–Ω  Push ‚òë  Email ‚òê  ‚îÇ
‚îÇ                                          ‚îÇ
‚îÇ  ‚îÄ‚îÄ –¢”©–ª–±”©—Ä ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ ‚îÇ
‚îÇ  üí∞ –¢”©–ª–±”©—Ä –±“Ø—Ä—Ç–≥—ç–≥–¥—Å—ç–Ω Push ‚òë  Email ‚òê  ‚îÇ
‚îÇ  üîô –ë—É—Ü–∞–∞–ª—Ç            Push ‚òë  Email ‚òê  ‚îÇ
‚îÇ  ‚ö†Ô∏è –ê–≤–ª–∞–≥–∞ —Ö—É–≥–∞—Ü–∞–∞     Push ‚òë  Email ‚òë  ‚îÇ
‚îÇ                                          ‚îÇ
‚îÇ  ‚îÄ‚îÄ –ù”©”©—Ü ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ ‚îÇ
‚îÇ  üì¶ –ù”©”©—Ü –±–∞–≥–∞          Push ‚òë  Email ‚òê  ‚îÇ
‚îÇ  üö® –ë–∞—Ä–∞–∞ –¥—É—É—Å—Å–∞–Ω       Push ‚òë  Email ‚òë  ‚îÇ
‚îÇ                                          ‚îÇ
‚îÇ  ‚îÄ‚îÄ –ß–∞—Ç ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ ‚îÇ
‚îÇ  üí¨ –®–∏–Ω—ç –º–µ—Å—Å–µ–∂        Push ‚òë  Email ‚òê  ‚îÇ
‚îÇ  üì¢ @Mention           Push ‚òë  Email ‚òê  ‚îÇ
‚îÇ  ‚úÖ –î–∞–∞–ª–≥–∞–≤–∞—Ä           Push ‚òë  Email ‚òê  ‚îÇ
‚îÇ                                          ‚îÇ
‚îÇ  ‚îÄ‚îÄ HR ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ ‚îÇ
‚îÇ  ‚è∞ –¶–∞–≥ –±“Ø—Ä—Ç–≥—ç—Ö —Å–∞–Ω—É—É–ª–≥–∞ Push ‚òë        ‚îÇ
‚îÇ  üí∞ –¶–∞–ª–∏–Ω–≥–∏–π–Ω —Ö—É—É–¥–∞—Å    Push ‚òë  Email ‚òë  ‚îÇ
‚îÇ                                          ‚îÇ
‚îÇ  [          –•–∞–¥–≥–∞–ª–∞—Ö           ]         ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## 5. PUSH NOTIFICATION –•–≠–†–≠–ì–ñ“Æ“Æ–õ–≠–õ–¢ (FCM)

### 5.1 FCM Token –±“Ø—Ä—Ç–≥—ç–ª
```javascript
// –•—ç—Ä—ç–≥–ª—ç–≥—á –Ω—ç–≤—Ç—Ä—ç—Ö—ç–¥ FCM token –∞–≤—á —Ö–∞–¥–≥–∞–ª–∞—Ö
async function registerFCMToken(userId) {
  const token = await messaging.getToken({ vapidKey: VAPID_KEY });
  const deviceInfo = getDeviceInfo();
  
  // users/{userId}/notificationPreferences.fcmTokens-–¥ –Ω—ç–º—ç—Ö
  await updateDoc(userPrefsRef, {
    fcmTokens: arrayUnion({
      token,
      device: deviceInfo.name,
      platform: deviceInfo.platform,  // "web" | "android" | "ios"
      lastUsed: serverTimestamp()
    })
  });
}
```

### 5.2 Push –∏–ª–≥—ç—ç—Ö (Cloud Function)
```javascript
exports.sendNotification = functions.firestore
  .document('businesses/{bizId}/notifications/{notifId}')
  .onCreate(async (snap, context) => {
    const notification = snap.data();
    
    // 1. –•“Ø–ª—ç—ç–Ω –∞–≤–∞–≥—á –±“Ø—Ä–∏–π–Ω preference —à–∞–ª–≥–∞—Ö
    for (const userId of notification.recipientIds) {
      const prefs = await getUserPreferences(userId);
      
      // 2. Template preference —à–∞–ª–≥–∞—Ö
      const templatePref = prefs.templates[notification.templateId];
      
      // 3. Push –∏–ª–≥—ç—ç—Ö
      if (templatePref?.push && prefs.channels.push) {
        // Quiet hours —à–∞–ª–≥–∞—Ö
        if (!isQuietHours(prefs.quietHours)) {
          const tokens = prefs.fcmTokens.map(t => t.token);
          await messaging.sendMulticast({
            tokens,
            notification: {
              title: notification.title,
              body: notification.body,
              icon: '/icons/icon-192.png',
            },
            data: {
              link: notification.link,
              notifId: snap.id,
              type: notification.templateId
            },
            webpush: {
              fcmOptions: { link: notification.link }
            }
          });
        }
      }
      
      // 4. Email –∏–ª–≥—ç—ç—Ö
      if (templatePref?.email && prefs.channels.email) {
        await sendNotificationEmail(userId, notification);
      }
    }
  });
```

### 5.3 –ú—ç–¥—ç–≥–¥–ª–∏–π–Ω –±“Ø–ª—ç–≥–ª—ç–ª (Grouping)
```javascript
// "5 —à–∏–Ω—ç –∑–∞—Ö–∏–∞–ª–≥–∞ –∏—Ä–ª—ç—ç" –≥—ç–∂ –Ω—ç–≥—Ç–≥—ç—Ö
// groupKey = "order.new_2026-02-22"
// –ò–∂–∏–ª groupKey-—Ç—ç–π –º—ç–¥—ç–≥–¥–ª“Ø“Ø–¥ –Ω—ç–≥ push notification –±–æ–ª–∂ –Ω—ç–≥—Ç–≥—ç–≥–¥—ç–Ω—ç

// Push payload:
{
  title: "5 —à–∏–Ω—ç –∑–∞—Ö–∏–∞–ª–≥–∞",
  body: "–ë–æ–ª–¥, –î–æ—Ä–∂, –°–∞—Ä–∞–∞ –±–æ–ª–æ–Ω –±—É—Å–∞–¥",
  data: { groupKey: "order.new_2026-02-22", count: 5 }
}
```

---

## 6. IN-APP NOTIFICATION BADGE

```javascript
// Real-time listener ‚Äî —É–Ω—à–∞–∞–≥“Ø–π –º—ç–¥—ç–≥–¥–ª–∏–π–Ω —Ç–æ–æ–≥ —Ö—è–Ω–∞—Ö
const unreadQuery = query(
  collection(db, `businesses/${bizId}/notifications`),
  where('recipientIds', 'array-contains', currentUserId),
  where(`readBy.${currentUserId}`, '==', null),
  orderBy('createdAt', 'desc'),
  limit(50)
);

onSnapshot(unreadQuery, (snap) => {
  setUnreadCount(snap.size);
});
```

---

## 7. –ú–≠–î–≠–ì–î–õ–ò–ô–ù –≠–†–•“Æ“Æ–î

| Permission ID | –ù—ç—Ä | –¢–∞–π–ª–±–∞—Ä |
|---------------|------|---------|
| `notifications.receive_new_order` | –®–∏–Ω—ç –∑–∞—Ö–∏–∞–ª–≥–∞ | –®–∏–Ω—ç –∑–∞—Ö–∏–∞–ª–≥–∞ –º—ç–¥—ç–≥–¥—ç–ª —Ö“Ø–ª—ç—ç–Ω –∞–≤–∞—Ö |
| `notifications.receive_status_change` | –°—Ç–∞—Ç—É—Å ”©”©—Ä—á–ª”©–ª—Ç | –°—Ç–∞—Ç—É—Å –º—ç–¥—ç–≥–¥—ç–ª |
| `notifications.receive_payment` | –¢”©–ª–±”©—Ä | –¢”©–ª–±”©—Ä–∏–π–Ω –º—ç–¥—ç–≥–¥—ç–ª |
| `notifications.receive_low_stock` | –ù”©”©—Ü –±–∞–≥–∞ | –ù”©”©—Ü–∏–π–Ω –º—ç–¥—ç–≥–¥—ç–ª |
| `notifications.receive_chat` | –ß–∞—Ç | –ß–∞—Ç –º—ç–¥—ç–≥–¥—ç–ª |
| `notifications.receive_hr` | HR | –¶–∞–≥, —á”©–ª”©”©, —Ü–∞–ª–∏–Ω –º—ç–¥—ç–≥–¥—ç–ª |
| `notifications.receive_ticket` | –¢–∏–∫–µ—Ç | –ì–æ–º–¥–æ–ª –º—ç–¥—ç–≥–¥—ç–ª |
| `notifications.send_email` | –ò-–º—ç–π–ª –∏–ª–≥—ç—ç—Ö | –•–∞—Ä–∏–ª—Ü–∞–≥—á–∏–¥ –∏-–º—ç–π–ª |
| `notifications.send_sms` | SMS –∏–ª–≥—ç—ç—Ö | –•–∞—Ä–∏–ª—Ü–∞–≥—á–∏–¥ SMS |
| `notifications.manage_settings` | –ú—ç–¥—ç–≥–¥–ª–∏–π–Ω —Ç–æ—Ö–∏—Ä–≥–æ–æ | –ë–∏–∑–Ω–µ—Å–∏–π–Ω –º—ç–¥—ç–≥–¥–ª–∏–π–Ω —Ç–æ—Ö–∏—Ä–≥–æ–æ |

---

*53 template, 4 —Å—É–≤–∞–≥, 10 —ç—Ä—Ö ‚Äî –ú—ç–¥—ç–≥–¥–ª–∏–π–Ω –±“Ø—Ä—ç–Ω –º–æ–¥—É–ª—å.*
